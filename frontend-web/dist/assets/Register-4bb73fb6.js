import{x,r as g,X as C,z as h,A as d,Q as r,I as s,aA as N,ag as n,y as R,M as _,O as q}from"./vendor-0e940c15.js";import{r as P}from"./index-3d03330f.js";import{E as f}from"./element-a02f8ecb.js";import{_ as U}from"./_plugin-vue_export-helper-c27b6911.js";const k={class:"register-container"},E={class:"register-wrapper"},B={class:"register-box"},F={class:"register-footer"},I=x({__name:"Register",setup(A){const p=N(),i=g(),u=g(!1),l=C({username:"",realName:"",phone:"",idCard:"",address:"",communityId:1,password:"",confirmPassword:""}),c={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"用户名长度在3到20个字符",trigger:"blur"}],realName:[{required:!0,message:"请输入真实姓名",trigger:"blur"},{min:2,max:10,message:"真实姓名长度在2到10个字符",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"手机号格式不正确",trigger:"blur"}],idCard:[{required:!0,message:"请输入身份证号",trigger:"blur"},{pattern:/^[1-9]\d{5}(18|19|20)\d{2}((0[1-9])|(1[0-2]))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$/,message:"身份证号格式不正确",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能少于6位",trigger:"blur"}],confirmPassword:[{required:!0,message:"请确认密码",trigger:"blur"},{validator:(m,e,o)=>{e!==l.password?o(new Error("两次输入的密码不一致")):o()},trigger:"blur"}]},b=async()=>{if(i.value)try{await i.value.validate(),u.value=!0,await P.post("/auth/register",l),f.success("注册成功！请登录"),p.push("/login")}catch(m){f.error(m.message||"注册失败")}finally{u.value=!1}},w=()=>{p.push("/login")};return(m,e)=>{const o=n("el-input"),t=n("el-form-item"),V=n("el-button"),v=n("el-form"),y=n("el-link");return R(),h("div",k,[d("div",E,[d("div",B,[e[8]||(e[8]=d("div",{class:"register-header"},[d("h2",null,"用户注册"),d("p",null,"欢迎加入社区诚信管理系统")],-1)),r(v,{ref_key:"registerFormRef",ref:i,model:l,rules:c,class:"register-form","label-width":"80px"},{default:s(()=>[r(t,{label:"用户名",prop:"username"},{default:s(()=>[r(o,{modelValue:l.username,"onUpdate:modelValue":e[0]||(e[0]=a=>l.username=a),placeholder:"请输入用户名（3-20位字符）",clearable:""},null,8,["modelValue"])]),_:1}),r(t,{label:"真实姓名",prop:"realName"},{default:s(()=>[r(o,{modelValue:l.realName,"onUpdate:modelValue":e[1]||(e[1]=a=>l.realName=a),placeholder:"请输入真实姓名",clearable:""},null,8,["modelValue"])]),_:1}),r(t,{label:"手机号",prop:"phone"},{default:s(()=>[r(o,{modelValue:l.phone,"onUpdate:modelValue":e[2]||(e[2]=a=>l.phone=a),placeholder:"请输入手机号",clearable:""},null,8,["modelValue"])]),_:1}),r(t,{label:"身份证号",prop:"idCard"},{default:s(()=>[r(o,{modelValue:l.idCard,"onUpdate:modelValue":e[3]||(e[3]=a=>l.idCard=a),placeholder:"请输入身份证号",clearable:""},null,8,["modelValue"])]),_:1}),r(t,{label:"住址",prop:"address"},{default:s(()=>[r(o,{modelValue:l.address,"onUpdate:modelValue":e[4]||(e[4]=a=>l.address=a),placeholder:"请输入住址（可选）",clearable:""},null,8,["modelValue"])]),_:1}),r(t,{label:"密码",prop:"password"},{default:s(()=>[r(o,{modelValue:l.password,"onUpdate:modelValue":e[5]||(e[5]=a=>l.password=a),type:"password",placeholder:"请输入密码（6位以上）","show-password":"",clearable:""},null,8,["modelValue"])]),_:1}),r(t,{label:"确认密码",prop:"confirmPassword"},{default:s(()=>[r(o,{modelValue:l.confirmPassword,"onUpdate:modelValue":e[6]||(e[6]=a=>l.confirmPassword=a),type:"password",placeholder:"请再次输入密码","show-password":"",clearable:""},null,8,["modelValue"])]),_:1}),r(t,null,{default:s(()=>[r(V,{type:"primary",class:"register-btn",loading:u.value,onClick:b},{default:s(()=>[_(q(u.value?"注册中...":"立即注册"),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),d("div",F,[r(y,{type:"primary",onClick:w},{default:s(()=>e[7]||(e[7]=[_("已有账号？立即登录")])),_:1,__:[7]})])])])])}}});const D=U(I,[["__scopeId","data-v-982a13de"]]);export{D as default};
