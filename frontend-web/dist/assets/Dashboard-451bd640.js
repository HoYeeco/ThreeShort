import{u as M,r as k}from"./index-3d03330f.js";import{j as I,d as f,A as L,s as z,v as N,p as j,B,C as q,k as P,D as V,u as h,e as Q,F as T}from"./element-a02f8ecb.js";import{x as G,r as R,k as J,z as v,Q as s,I as e,ag as m,y,A as a,O as p,u as o,M as r,P as $}from"./vendor-0e940c15.js";import{_ as K}from"./_plugin-vue_export-helper-c27b6911.js";const W={class:"dashboard-container"},X={class:"welcome-content"},Y={class:"welcome-text"},Z={class:"welcome-avatar"},tt={class:"stat-content"},st={class:"stat-number"},et={class:"stat-icon"},at={class:"stat-content"},ot={class:"stat-number"},lt={class:"stat-icon"},nt={class:"stat-content"},dt={class:"stat-number"},it={class:"stat-icon"},rt={class:"stat-content"},ut={class:"stat-number"},pt={class:"stat-icon"},_t={class:"stat-content"},ct={class:"stat-number"},ft={class:"stat-icon"},vt={class:"stat-content"},mt={class:"stat-number"},yt={class:"stat-icon"},gt={class:"stat-content"},bt={class:"stat-number"},Ct={class:"stat-icon"},Rt={class:"stat-content"},$t={class:"stat-number"},kt={class:"stat-icon"},wt={class:"stat-content"},St={class:"stat-number"},Et={class:"stat-icon"},zt={class:"stat-content"},Pt={class:"stat-number"},At={class:"stat-icon"},Dt={class:"stat-content"},Ft={class:"stat-number"},Ot={class:"stat-icon"},Ut={class:"stat-content"},xt={class:"stat-number"},It={class:"stat-icon"},Lt={class:"notice-content"},Nt={class:"quick-actions"},jt=G({__name:"Dashboard",setup(Ht){const c=M(),w=R({total:0,active:0,today:0,creditHigh:0}),S=R({totalExchanges:0,totalPoints:0,todayExchanges:0,successRate:0}),E=R({totalReports:0,pendingReports:0,approvedReports:0,rejectedReports:0}),g=R({totalOperations:0,todayOperations:0,onlineUsers:0,systemUptime:"0天"}),b=R({currentScore:0,creditLevel:"D",rewardPoints:0,totalReports:0}),A=R(""),H=async()=>{var n;try{if(c.isAdmin){const[t,C,d]=await Promise.all([k.get("/user/statistics"),k.get("/credit-report/statistics"),k.get("/exchange-record/statistics")]);w.value={total:t.data.total||0,active:t.data.active||0,today:t.data.today||0,creditHigh:t.data.creditHigh||0},E.value={totalReports:C.data.totalReports||0,pendingReports:C.data.pendingReports||0,approvedReports:C.data.approvedReports||0,rejectedReports:C.data.rejectedReports||0},S.value={totalExchanges:d.data.totalExchanges||0,totalPoints:d.data.totalPoints||0,todayExchanges:d.data.todayExchanges||0,successRate:d.data.successRate||0}}else if(c.isMaintainer){const t=await k.get("/system/statistics");g.value={totalOperations:t.data.totalOperations||0,todayOperations:t.data.todayOperations||0,onlineUsers:t.data.onlineUsers||0,systemUptime:t.data.systemUptime||"0天"}}else{const t=await k.get(`/user-credit-profile/${(n=c.userInfo)==null?void 0:n.id}`);b.value={currentScore:t.data.currentScore||0,creditLevel:t.data.creditLevel||"D",rewardPoints:t.data.rewardPoints||0,totalReports:t.data.totalReports||0}}}catch(t){console.error("加载统计数据失败:",t),w.value={total:0,active:0,today:0,creditHigh:0},S.value={totalExchanges:0,totalPoints:0,todayExchanges:0,successRate:0},E.value={totalReports:0,pendingReports:0,approvedReports:0,rejectedReports:0},g.value={totalOperations:0,todayOperations:0,onlineUsers:0,systemUptime:"0天"},b.value={currentScore:0,creditLevel:"D",rewardPoints:0,totalReports:0}}};return J(()=>{H();const n=new Date;A.value=n.toLocaleDateString("zh-CN",{year:"numeric",month:"long",day:"numeric",weekday:"long"})}),(n,t)=>{const C=m("el-avatar"),d=m("el-card"),l=m("el-icon"),_=m("el-col"),D=m("el-row"),F=m("el-alert"),u=m("el-button");return y(),v("div",W,[s(d,{class:"welcome-card"},{default:e(()=>{var i,O;return[a("div",X,[a("div",Y,[a("h1",null,"欢迎回来，"+p((i=o(c).userInfo)==null?void 0:i.realName)+"！",1),a("p",null,"今天是 "+p(A.value)+"，祝您工作愉快！",1)]),a("div",Z,[s(C,{src:(O=o(c).userInfo)==null?void 0:O.avatar,size:80},{default:e(()=>{var U,x;return[r(p((x=(U=o(c).userInfo)==null?void 0:U.realName)==null?void 0:x.charAt(0)),1)]}),_:1},8,["src"])])])]}),_:1}),s(D,{gutter:20,style:{"margin-top":"20px"}},{default:e(()=>[o(c).isAdmin?(y(),v($,{key:0},[s(_,{span:6},{default:e(()=>[s(d,{class:"stat-card"},{default:e(()=>[a("div",tt,[a("div",st,p(w.value.total),1),t[15]||(t[15]=a("div",{class:"stat-label"},"总用户数",-1))]),a("div",et,[s(l,{size:"40",color:"#409EFF"},{default:e(()=>[s(o(I))]),_:1})])]),_:1})]),_:1}),s(_,{span:6},{default:e(()=>[s(d,{class:"stat-card"},{default:e(()=>[a("div",at,[a("div",ot,p(E.value.pendingReports),1),t[16]||(t[16]=a("div",{class:"stat-label"},"待审核上报",-1))]),a("div",lt,[s(l,{size:"40",color:"#E6A23C"},{default:e(()=>[s(o(f))]),_:1})])]),_:1})]),_:1}),s(_,{span:6},{default:e(()=>[s(d,{class:"stat-card"},{default:e(()=>[a("div",nt,[a("div",dt,p(w.value.creditHigh),1),t[17]||(t[17]=a("div",{class:"stat-label"},"高信用用户",-1))]),a("div",it,[s(l,{size:"40",color:"#67C23A"},{default:e(()=>[s(o(L))]),_:1})])]),_:1})]),_:1}),s(_,{span:6},{default:e(()=>[s(d,{class:"stat-card"},{default:e(()=>[a("div",rt,[a("div",ut,p(S.value.todayExchanges),1),t[18]||(t[18]=a("div",{class:"stat-label"},"今日兑换",-1))]),a("div",pt,[s(l,{size:"40",color:"#F56C6C"},{default:e(()=>[s(o(z))]),_:1})])]),_:1})]),_:1})],64)):o(c).isMaintainer?(y(),v($,{key:1},[s(_,{span:6},{default:e(()=>[s(d,{class:"stat-card"},{default:e(()=>[a("div",_t,[a("div",ct,p(g.value.totalOperations),1),t[19]||(t[19]=a("div",{class:"stat-label"},"总操作数",-1))]),a("div",ft,[s(l,{size:"40",color:"#409EFF"},{default:e(()=>[s(o(N))]),_:1})])]),_:1})]),_:1}),s(_,{span:6},{default:e(()=>[s(d,{class:"stat-card"},{default:e(()=>[a("div",vt,[a("div",mt,p(g.value.todayOperations),1),t[20]||(t[20]=a("div",{class:"stat-label"},"今日操作",-1))]),a("div",yt,[s(l,{size:"40",color:"#67C23A"},{default:e(()=>[s(o(j))]),_:1})])]),_:1})]),_:1}),s(_,{span:6},{default:e(()=>[s(d,{class:"stat-card"},{default:e(()=>[a("div",gt,[a("div",bt,p(g.value.onlineUsers),1),t[21]||(t[21]=a("div",{class:"stat-label"},"在线用户",-1))]),a("div",Ct,[s(l,{size:"40",color:"#E6A23C"},{default:e(()=>[s(o(B))]),_:1})])]),_:1})]),_:1}),s(_,{span:6},{default:e(()=>[s(d,{class:"stat-card"},{default:e(()=>[a("div",Rt,[a("div",$t,p(g.value.systemUptime),1),t[22]||(t[22]=a("div",{class:"stat-label"},"系统运行时间",-1))]),a("div",kt,[s(l,{size:"40",color:"#F56C6C"},{default:e(()=>[s(o(q))]),_:1})])]),_:1})]),_:1})],64)):(y(),v($,{key:2},[s(_,{span:6},{default:e(()=>[s(d,{class:"stat-card"},{default:e(()=>[a("div",wt,[a("div",St,p(b.value.currentScore||0),1),t[23]||(t[23]=a("div",{class:"stat-label"},"当前信用分",-1))]),a("div",Et,[s(l,{size:"40",color:"#409EFF"},{default:e(()=>[s(o(P))]),_:1})])]),_:1})]),_:1}),s(_,{span:6},{default:e(()=>[s(d,{class:"stat-card"},{default:e(()=>[a("div",zt,[a("div",Pt,p(b.value.creditLevel||"D"),1),t[24]||(t[24]=a("div",{class:"stat-label"},"信用等级",-1))]),a("div",At,[s(l,{size:"40",color:"#67C23A"},{default:e(()=>[s(o(L))]),_:1})])]),_:1})]),_:1}),s(_,{span:6},{default:e(()=>[s(d,{class:"stat-card"},{default:e(()=>[a("div",Dt,[a("div",Ft,p(b.value.rewardPoints||0),1),t[25]||(t[25]=a("div",{class:"stat-label"},"奖励积分",-1))]),a("div",Ot,[s(l,{size:"40",color:"#E6A23C"},{default:e(()=>[s(o(V))]),_:1})])]),_:1})]),_:1}),s(_,{span:6},{default:e(()=>[s(d,{class:"stat-card"},{default:e(()=>[a("div",Ut,[a("div",xt,p(b.value.totalReports||0),1),t[26]||(t[26]=a("div",{class:"stat-label"},"我的上报",-1))]),a("div",It,[s(l,{size:"40",color:"#F56C6C"},{default:e(()=>[s(o(f))]),_:1})])]),_:1})]),_:1})],64))]),_:1}),s(D,{gutter:20,style:{"margin-top":"20px"}},{default:e(()=>[s(_,{span:12},{default:e(()=>[s(d,null,{header:e(()=>t[27]||(t[27]=[a("span",null,"系统公告",-1)])),default:e(()=>[a("div",Lt,[s(F,{title:"系统维护通知",type:"info",description:"系统将于本周日凌晨2:00-4:00进行维护升级，请提前安排相关工作。","show-icon":"",closable:!1}),t[28]||(t[28]=a("br",null,null,-1)),s(F,{title:"功能更新",type:"success",description:"个人信息管理功能已上线，用户可以自主修改基本信息。","show-icon":"",closable:!1})])]),_:1})]),_:1}),s(_,{span:12},{default:e(()=>[s(d,null,{header:e(()=>t[29]||(t[29]=[a("span",null,"快捷操作",-1)])),default:e(()=>[a("div",Nt,[s(u,{type:"primary",onClick:t[0]||(t[0]=i=>n.$router.push("/profile"))},{default:e(()=>[s(l,null,{default:e(()=>[s(o(h))]),_:1}),t[30]||(t[30]=r(" 个人信息 "))]),_:1,__:[30]}),o(c).isAdmin?(y(),v($,{key:0},[s(u,{type:"success",onClick:t[1]||(t[1]=i=>n.$router.push("/users"))},{default:e(()=>[s(l,null,{default:e(()=>[s(o(I))]),_:1}),t[31]||(t[31]=r(" 用户管理 "))]),_:1,__:[31]}),s(u,{type:"warning",onClick:t[2]||(t[2]=i=>n.$router.push("/admin/reports"))},{default:e(()=>[s(l,null,{default:e(()=>[s(o(f))]),_:1}),t[32]||(t[32]=r(" 审核上报 "))]),_:1,__:[32]}),s(u,{type:"info",onClick:t[3]||(t[3]=i=>n.$router.push("/credit-profiles"))},{default:e(()=>[s(l,null,{default:e(()=>[s(o(P))]),_:1}),t[33]||(t[33]=r(" 信用档案 "))]),_:1,__:[33]}),s(u,{type:"danger",onClick:t[4]||(t[4]=i=>n.$router.push("/admin/products"))},{default:e(()=>[s(l,null,{default:e(()=>[s(o(z))]),_:1}),t[34]||(t[34]=r(" 商品管理 "))]),_:1,__:[34]}),s(u,{type:"default",onClick:t[5]||(t[5]=i=>n.$router.push("/admin/agreements"))},{default:e(()=>[s(l,null,{default:e(()=>[s(o(f))]),_:1}),t[35]||(t[35]=r(" 公约管理 "))]),_:1,__:[35]})],64)):o(c).isMaintainer?(y(),v($,{key:1},[s(u,{type:"warning",onClick:t[6]||(t[6]=i=>n.$router.push("/maintenance/logs"))},{default:e(()=>[s(l,null,{default:e(()=>[s(o(f))]),_:1}),t[36]||(t[36]=r(" 操作日志 "))]),_:1,__:[36]}),s(u,{type:"info",onClick:t[7]||(t[7]=i=>n.$router.push("/maintenance/tasks"))},{default:e(()=>[s(l,null,{default:e(()=>[s(o(N))]),_:1}),t[37]||(t[37]=r(" 定时任务 "))]),_:1,__:[37]}),s(u,{type:"danger",onClick:t[8]||(t[8]=i=>n.$router.push("/maintenance/system"))},{default:e(()=>[s(l,null,{default:e(()=>[s(o(j))]),_:1}),t[38]||(t[38]=r(" 系统监控 "))]),_:1,__:[38]})],64)):(y(),v($,{key:2},[s(u,{type:"warning",onClick:t[9]||(t[9]=i=>n.$router.push("/credit-reports"))},{default:e(()=>[s(l,null,{default:e(()=>[s(o(f))]),_:1}),t[39]||(t[39]=r(" 信用上报 "))]),_:1,__:[39]}),s(u,{type:"info",onClick:t[10]||(t[10]=i=>n.$router.push("/credit-profiles"))},{default:e(()=>[s(l,null,{default:e(()=>[s(o(P))]),_:1}),t[40]||(t[40]=r(" 我的信用 "))]),_:1,__:[40]}),s(u,{type:"danger",onClick:t[11]||(t[11]=i=>n.$router.push("/products"))},{default:e(()=>[s(l,null,{default:e(()=>[s(o(z))]),_:1}),t[41]||(t[41]=r(" 积分商城 "))]),_:1,__:[41]}),s(u,{type:"default",onClick:t[12]||(t[12]=i=>n.$router.push("/exchange-records"))},{default:e(()=>[s(l,null,{default:e(()=>[s(o(Q))]),_:1}),t[42]||(t[42]=r(" 兑换记录 "))]),_:1,__:[42]}),s(u,{type:"success",onClick:t[13]||(t[13]=i=>n.$router.push("/feedback"))},{default:e(()=>[s(l,null,{default:e(()=>[s(o(T))]),_:1}),t[43]||(t[43]=r(" 意见反馈 "))]),_:1,__:[43]}),s(u,{type:"primary",onClick:t[14]||(t[14]=i=>n.$router.push("/agreements"))},{default:e(()=>[s(l,null,{default:e(()=>[s(o(f))]),_:1}),t[44]||(t[44]=r(" 学习公约 "))]),_:1,__:[44]})],64))])]),_:1})]),_:1})]),_:1})])}}});const ht=K(jt,[["__scopeId","data-v-c2828a50"]]);export{ht as default};
